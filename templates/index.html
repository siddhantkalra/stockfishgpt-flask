<!DOCTYPE html>
<html>
<head>
    <title>♟️ StockfishGPT – Chess Game Analyzer</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 30px; max-width: 800px; margin: auto; }
        h1 { text-align: center; }
        textarea { width: 100%; height: 200px; }
        .move-block { margin-bottom: 25px; background: #f8f8f8; padding: 15px; border-radius: 6px; }
        .eval { font-weight: bold; }
    </style>
</head>
<body>
    <h1>♟️ StockfishGPT — Chess Analyzer with GPT Commentary</h1>
    <form method="POST" enctype="multipart/form-data">
        <p><strong>📄 Upload PGN File:</strong></p>
        <input type="file" name="pgn_file" accept=".pgn" required>
        <button type="submit">Analyze</button>
    </form>

    {% if commentary %}
        <h2>⚠️ Mistakes & Inaccuracies</h2>
        {% for move in commentary %}
        <div class="move-block">
            <p><strong>Move:</strong> {{ move.move }}</p>
            <p><span class="eval">Eval Before:</span> {{ move.eval_before }} → <span class="eval">After:</span> {{ move.eval_after }}</p>
            <p>{{ move.comment }}</p>
        </div>
        {% endfor %}
    {% endif %}

    {% if pgn %}
        <h2>📋 Full PGN</h2>
        <textarea readonly>{{ pgn }}</textarea>
    {% endif %}
</body>
</html>
